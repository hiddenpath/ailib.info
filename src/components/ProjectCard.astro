---
interface Props {
  locale?: 'en' | 'zh';
  project: 'protocol' | 'rust' | 'python';
  version: string;
  title: string;
  titleZh?: string;
  description: string;
  descriptionZh?: string;
  features: string;
  featuresZh?: string;
  link: string;
  icon: string;
}

const {
  locale = 'en',
  project,
  version,
  title,
  titleZh,
  description,
  descriptionZh,
  features,
  featuresZh,
  link,
  icon
} = Astro.props;

const isZh = locale === 'zh';
const displayTitle = isZh && titleZh ? titleZh : title;
const displayDesc = isZh && descriptionZh ? descriptionZh : description;
const displayFeatures = isZh && featuresZh ? featuresZh : features;

// Split features by ã€ (Chinese comma) or , (English comma)
const featureList = displayFeatures.split(isZh ? 'ã€' : ',').map(f => f.trim()).filter(f => f);

const projectColors = {
  protocol: 'from-blue-500 to-indigo-600',
  rust: 'from-orange-500 to-red-600',
  python: 'from-blue-400 to-sky-600'
};
---

<div class="group relative flex flex-col bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-8 transition-all duration-300 hover:shadow-2xl hover:shadow-blue-500/10 hover:-translate-y-1">
  <div class="flex items-center gap-4 mb-6">
    <div class={`w-14 h-14 rounded-xl bg-gradient-to-br ${projectColors[project]} flex items-center justify-center text-3xl shadow-lg shadow-current/20`}>
      {project === 'protocol' ? 'ğŸ“˜' : project === 'rust' ? 'ğŸ¦€' : 'ğŸ'}
    </div>
    <div class="flex-1">
      <h3 class="text-xl font-bold text-slate-900 dark:text-white group-hover:text-blue-600 transition-colors">{displayTitle}</h3>
      <span class="inline-block bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-xs font-bold px-2 py-1 rounded-md mt-1">v{version}</span>
    </div>
  </div>

  <p class="text-slate-600 dark:text-slate-400 text-sm leading-relaxed mb-8 flex-1">
    {displayDesc}
  </p>

  <div class="flex flex-wrap gap-2 mb-8">
    {featureList.map(feature => (
      <span class="px-3 py-1 bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 text-xs font-medium rounded-lg border border-slate-100 dark:border-slate-700/50">
        {feature}
      </span>
    ))}
  </div>

  <a href={link} class="inline-flex items-center font-bold text-sm text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform">
    {isZh ? 'äº†è§£æ›´å¤š' : 'Learn more'}
    <svg class="ml-2 w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
    </svg>
  </a>
</div>
