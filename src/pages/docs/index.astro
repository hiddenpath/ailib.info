---
import { getCollection } from 'astro:content';
import DocsLayout from '../../layouts/DocsLayout.astro';
const entries = await getCollection('docs');
const groups = new Map();
for (const e of entries) {
  const g = e.data.group || 'Other';
  if (!groups.has(g)) groups.set(g, []);
  groups.get(g).push(e);
}
for (const list of groups.values()) list.sort((a, b) => (a.data.order ?? 0) - (b.data.order ?? 0));
---

<DocsLayout docTitle="Documentation" frontmatter={{ title: 'Documentation' }} url={Astro.url}>
  <h1>Documentation</h1>
  {
    [...groups.keys()].sort().map((g) => (
      <section>
        <h2>{g}</h2>
        <ul>
          {groups.get(g).map((e) => (
            <li>
              <a href={`/docs/${e.slug}`}>
                {e.data.title}
                {e.data.status && (
                  <span class={`badge-status ${e.data.status}`}> {e.data.status}</span>
                )}
              </a>
            </li>
          ))}
        </ul>
      </section>
    ))
  }
</DocsLayout>
<style>
  section {
    margin-bottom: 40px;
  }
  ul {
    list-style: none;
    padding: 0;
  }
  li {
    margin: 4px 0;
  }
  .badge-status {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 2px 4px;
    border-radius: 4px;
    background: #2a3442;
    color: #b5c6e5;
  }
  .badge-status.stable {
    background: #1d4d2f;
    color: #9ee3b4;
  }
  .badge-status.partial {
    background: #5a4708;
    color: #ffdb85;
  }
  .badge-status.planned {
    background: #3a3a3a;
    color: #c8c8c8;
  }
</style>
