---
import '../../../styles/global.css';
import SiteHeader from '../../../components/SiteHeader.astro';
import Footer from '../../../components/Footer.astro';
import EcosystemOverview from '../../../components/diagrams/EcosystemOverview.astro';

const locale = 'zh-cn';
---

<html lang="zh-CN" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <title>AI-Protocol | 与供应商无关的 AI 规范</title>
    <meta name="description" content="AI-Protocol 是与供应商无关的规范，标准化与 AI 模型的交互。37 供应商、YAML 清单、JSON Schema 验证。" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" href="/favicon.svg" />
  </head>
  <body>
    <SiteHeader locale={locale} />

    <main>
      <!-- Hero -->
      <section class="relative pt-16 pb-20 overflow-hidden">
        <div class="absolute inset-0 -z-10">
          <div class="absolute top-0 left-1/3 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"></div>
          <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-pink-500/5 rounded-full blur-3xl"></div>
        </div>
        <div class="container">
          <div class="max-w-4xl">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium bg-purple-500/10 text-purple-400 border border-purple-500/20 mb-6">
              规范 v0.7.0 &middot; 37 供应商
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-6 leading-[1.05]">
              <span class="text-[var(--text)]">驱动一切的</span>
              <span class="gradient-text-protocol"> 规范</span>
              <span class="text-[var(--text)]">。</span>
            </h1>
            <p class="text-lg md:text-xl text-[var(--text-dim)] max-w-2xl mb-8 leading-relaxed">
              AI-Protocol 将「做什么」与「怎么做」分离。V2 规范采用三层架构：核心协议 &rarr; 能力扩展 &rarr; 环境配置。供应商清单声明端点、认证、参数映射、流式解码器和错误处理 — 全部使用 YAML，全部由 JSON Schema 验证。
            </p>
            <div class="flex flex-wrap gap-4">
              <a href="/zh-cn/protocol/overview/" class="inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-all hover:no-underline">
                阅读文档
              </a>
              <a href="https://github.com/hiddenpath/ai-protocol" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-6 py-3 border border-[var(--border)] text-[var(--text)] font-semibold rounded-lg hover:bg-[var(--bg-alt)] transition-all hover:no-underline">
                在 GitHub 上查看
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- V2 Architecture -->
      <section class="section">
        <div class="container">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-6 text-center">V2 三层架构</h2>
          <p class="text-lg text-[var(--text-dim)] max-w-2xl mx-auto text-center mb-8">
            V2 将规范组织为三层：<strong class="text-[var(--text)]">核心协议</strong>（基础聊天、流式、错误）&rarr; <strong class="text-[var(--text)]">能力扩展</strong>（工具、视觉、结构化输出）&rarr; <strong class="text-[var(--text)]">环境配置</strong>（供应商特定配置）。V2-alpha 清单已支持 OpenAI、Anthropic 和 Gemini。
          </p>
        </div>
      </section>

      <!-- What's in the Protocol -->
      <section class="section-alt">
        <div class="container">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-10 text-center">协议内容</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">spec.yaml</div>
              <h3 class="font-bold text-[var(--text)] mb-2">核心规范</h3>
              <p class="text-sm text-[var(--text-dim)]">定义标准参数（temperature、max_tokens）、流式事件（PartialContentDelta、ToolCallStarted）、错误类型（13 种）和重试策略。</p>
            </div>
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">providers/</div>
              <h3 class="font-bold text-[var(--text)] mb-2">37 供应商清单</h3>
              <p class="text-sm text-[var(--text-dim)]">每个 YAML 文件声明供应商的端点、认证、参数映射、SSE 解码器配置、错误分类、限速响应头和能力。</p>
            </div>
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">models/</div>
              <h3 class="font-bold text-[var(--text)] mb-2">模型注册表</h3>
              <p class="text-sm text-[var(--text-dim)]">模型实例包含供应商引用、上下文窗口、能力标志和按 token 计价。支持 GPT、Claude、Gemini、DeepSeek、Qwen 等。</p>
            </div>
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">schemas/</div>
              <h3 class="font-bold text-[var(--text)] mb-2">JSON Schema 验证</h3>
              <p class="text-sm text-[var(--text-dim)]">JSON Schema 2020-12 定义验证每个清单。CI 流程确保配置正确。零运行时意外。</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Provider Manifest Example -->
      <section class="section">
        <div class="container">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">
            <div>
              <h2 class="text-3xl font-bold text-[var(--text)] mb-4">供应商清单示例</h2>
              <p class="text-[var(--text-dim)] mb-6 leading-relaxed">
                每个供应商由一个 YAML 清单描述。它声明运行时与供应商通信所需的一切 — 端点、认证、参数映射、流式解码器、错误处理与能力。
              </p>
              <p class="text-[var(--text-dim)] mb-4 leading-relaxed">
                运行时读取这些清单，将用户请求「编译」为供应商特定的 HTTP 调用。无需任何 <code>if provider == "openai"</code> 分支。
              </p>
              <ul class="space-y-3">
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">端点与认证</strong> — 基础 URL、协议、Bearer 令牌、API 密钥头</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">参数映射</strong> — 标准名称到供应商特定 JSON 字段</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">流式解码器</strong> — SSE/NDJSON 格式、JSONPath 事件提取规则</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">错误分类</strong> — HTTP 状态码到 13 种标准错误类型</span>
                </li>
              </ul>
            </div>
            <div>
              <pre class="text-sm !bg-[#0d1117] !border-purple-500/20"><code class="language-yaml"><span style="color:#7ee787">id</span>: anthropic
<span style="color:#7ee787">protocol_version</span>: <span style="color:#a5d6ff">"0.7.0"</span>
<span style="color:#7ee787">endpoint</span>:
  <span style="color:#7ee787">base_url</span>: <span style="color:#a5d6ff">"https://api.anthropic.com/v1"</span>
  <span style="color:#7ee787">chat_path</span>: <span style="color:#a5d6ff">"/messages"</span>
<span style="color:#7ee787">auth</span>:
  <span style="color:#7ee787">type</span>: bearer
  <span style="color:#7ee787">token_env</span>: <span style="color:#a5d6ff">"ANTHROPIC_API_KEY"</span>
<span style="color:#7ee787">parameter_mappings</span>:
  <span style="color:#7ee787">temperature</span>: <span style="color:#a5d6ff">"temperature"</span>
  <span style="color:#7ee787">max_tokens</span>: <span style="color:#a5d6ff">"max_tokens"</span>
  <span style="color:#7ee787">stream</span>: <span style="color:#a5d6ff">"stream"</span>
<span style="color:#7ee787">streaming</span>:
  <span style="color:#7ee787">decoder</span>:
    <span style="color:#7ee787">format</span>: <span style="color:#a5d6ff">"anthropic_sse"</span>
  <span style="color:#7ee787">event_map</span>:
    - <span style="color:#7ee787">match</span>: <span style="color:#a5d6ff">"$.type == 'content_block_delta'"</span>
      <span style="color:#7ee787">emit</span>: <span style="color:#a5d6ff">"PartialContentDelta"</span>
<span style="color:#7ee787">error_classification</span>:
  <span style="color:#7ee787">by_http_status</span>:
    <span style="color:#a5d6ff">"429"</span>: <span style="color:#a5d6ff">"rate_limited"</span>
    <span style="color:#a5d6ff">"401"</span>: <span style="color:#a5d6ff">"authentication"</span>
<span style="color:#7ee787">capabilities</span>:
  <span style="color:#7ee787">streaming</span>: true
  <span style="color:#7ee787">tools</span>: true
  <span style="color:#7ee787">vision</span>: true</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Ecosystem Architecture -->
      <section class="section-alt">
        <div class="container">
          <div class="text-center mb-10">
            <h2 class="text-3xl font-bold text-[var(--text)] mb-4">协议所处位置</h2>
            <p class="text-lg text-[var(--text-dim)] max-w-2xl mx-auto">
              AI-Protocol 是基础层。运行时消费它，应用消费运行时。
            </p>
          </div>
          <EcosystemOverview locale={locale} />
        </div>
      </section>

      <!-- Supported Providers -->
      <section class="section">
        <div class="container">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-4 text-center">支持的供应商</h2>
          <p class="text-lg text-[var(--text-dim)] max-w-2xl mx-auto text-center mb-10">
            每个供应商都有完整的 YAML 清单，包含端点、认证、参数映射、流式解码器、错误处理与能力标志。
          </p>

          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
            {['OpenAI', 'Anthropic', 'Google Gemini', 'Groq', 'Mistral', 'DeepSeek', 'Qwen', 'Cohere', 'Azure OpenAI', 'Together AI', 'Perplexity', 'NVIDIA', 'Fireworks AI', 'Replicate', 'OpenRouter', 'DeepInfra', 'AI21 Labs', 'Cerebras', 'Lepton AI', 'Zhipu GLM', 'Doubao', 'Baidu ERNIE', 'Tencent Hunyuan', 'iFlytek Spark', 'Moonshot', 'MiniMax', 'Baichuan', 'Yi / 01.AI', 'SiliconFlow', 'SenseNova'].map(name => (
              <div class="flex items-center gap-2 px-3 py-2.5 rounded-lg border border-[var(--border)] bg-[var(--bg-card)] text-sm text-[var(--text)]">
                <div class="w-2 h-2 rounded-full bg-purple-400 flex-shrink-0"></div>
                {name}
              </div>
            ))}
          </div>
        </div>
      </section>

      <!-- CTA -->
      <section class="section-alt">
        <div class="container text-center">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-4">探索协议</h2>
          <p class="text-lg text-[var(--text-dim)] mb-8 max-w-xl mx-auto">
            阅读规范、浏览供应商清单，或贡献新供应商。
          </p>
          <div class="flex flex-wrap gap-4 justify-center">
            <a href="/zh-cn/protocol/overview/" class="inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-all hover:no-underline">文档</a>
            <a href="/zh-cn/protocol/contributing/" class="inline-flex items-center gap-2 px-6 py-3 border border-[var(--border)] text-[var(--text)] font-semibold rounded-lg hover:bg-[var(--bg-alt)] transition-all hover:no-underline">贡献供应商</a>
          </div>
        </div>
      </section>
    </main>

    <Footer locale={locale} />
  </body>
</html>
