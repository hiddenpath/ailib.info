---
import '../../styles/global.css';
import SiteHeader from '../../components/SiteHeader.astro';
import Footer from '../../components/Footer.astro';
import EcosystemOverview from '../../components/diagrams/EcosystemOverview.astro';

const locale = 'en';
---

<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <title>AI-Protocol | Provider-Agnostic AI Specification</title>
    <meta name="description" content="AI-Protocol is a provider-agnostic specification standardizing interactions with AI models. 35+ providers, YAML manifests, JSON Schema validated." />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" href="/favicon.svg" />
  </head>
  <body>
    <SiteHeader locale={locale} />

    <main>
      <!-- Hero -->
      <section class="relative pt-16 pb-20 overflow-hidden">
        <div class="absolute inset-0 -z-10">
          <div class="absolute top-0 left-1/3 w-96 h-96 bg-purple-500/5 rounded-full blur-3xl"></div>
          <div class="absolute bottom-0 right-1/4 w-80 h-80 bg-pink-500/5 rounded-full blur-3xl"></div>
        </div>
        <div class="container">
          <div class="max-w-4xl">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium bg-purple-500/10 text-purple-400 border border-purple-500/20 mb-6">
              Specification v0.5.0 &middot; 35+ Providers
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-6 leading-[1.05]">
              <span class="text-[var(--text)]">The</span>
              <span class="gradient-text-protocol"> Specification</span>
              <br />
              <span class="text-[var(--text)]">That Drives Everything.</span>
            </h1>
            <p class="text-lg md:text-xl text-[var(--text-dim)] max-w-2xl mb-8 leading-relaxed">
              AI-Protocol separates "what to do" from "how to do it." The V2 specification uses a three-layer architecture: Core Protocol &rarr; Capability Extensions &rarr; Environment Profile. Provider manifests declare endpoints, auth, parameter mappings, streaming decoders, and error handling — all in YAML, all validated by JSON Schema.
            </p>
            <div class="flex flex-wrap gap-4">
              <a href="/protocol/overview/" class="inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-all hover:no-underline">
                Read the Docs
              </a>
              <a href="https://github.com/hiddenpath/ai-protocol" target="_blank" rel="noopener" class="inline-flex items-center gap-2 px-6 py-3 border border-[var(--border)] text-[var(--text)] font-semibold rounded-lg hover:bg-[var(--bg-alt)] transition-all hover:no-underline">
                View on GitHub
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- V2 Architecture -->
      <section class="section">
        <div class="container">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-6 text-center">V2 Three-Layer Architecture</h2>
          <p class="text-lg text-[var(--text-dim)] max-w-2xl mx-auto text-center mb-8">
            V2 organizes the specification into three layers: <strong class="text-[var(--text)]">Core Protocol</strong> (base chat, streaming, errors) &rarr; <strong class="text-[var(--text)]">Capability Extensions</strong> (tools, vision, structured output) &rarr; <strong class="text-[var(--text)]">Environment Profile</strong> (provider-specific config). V2-alpha manifests are available for OpenAI, Anthropic, and Gemini.
          </p>
        </div>
      </section>

      <!-- What's in the Protocol -->
      <section class="section-alt">
        <div class="container">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-10 text-center">What's Inside</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">spec.yaml</div>
              <h3 class="font-bold text-[var(--text)] mb-2">Core Specification</h3>
              <p class="text-sm text-[var(--text-dim)]">Defines standard parameters (temperature, max_tokens), streaming events (PartialContentDelta, ToolCallStarted), error classes (13 types), and retry policies.</p>
            </div>
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">providers/</div>
              <h3 class="font-bold text-[var(--text)] mb-2">35+ Provider Manifests</h3>
              <p class="text-sm text-[var(--text-dim)]">Each YAML file declares a provider's endpoint, auth, parameter mappings, SSE decoder config, error classification, rate limit headers, and capabilities.</p>
            </div>
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">models/</div>
              <h3 class="font-bold text-[var(--text)] mb-2">Model Registry</h3>
              <p class="text-sm text-[var(--text-dim)]">Model instances with provider references, context windows, capability flags, and per-token pricing. GPT, Claude, Gemini, DeepSeek, Qwen, and more.</p>
            </div>
            <div class="p-6 rounded-xl border border-[var(--border)] bg-[var(--bg-card)]">
              <div class="text-3xl font-extrabold gradient-text-protocol mb-2">schemas/</div>
              <h3 class="font-bold text-[var(--text)] mb-2">JSON Schema Validation</h3>
              <p class="text-sm text-[var(--text-dim)]">JSON Schema 2020-12 definitions validate every manifest. CI pipelines ensure configuration correctness. Zero runtime surprises.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Provider Manifest Example -->
      <section class="section">
        <div class="container">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">
            <div>
              <h2 class="text-3xl font-bold text-[var(--text)] mb-4">A Provider Manifest</h2>
              <p class="text-[var(--text-dim)] mb-6 leading-relaxed">
                Each provider is described by a YAML manifest. It declares everything a runtime needs to communicate with the provider — endpoint, authentication, parameter mapping, streaming decoder, error handling, and capabilities.
              </p>
              <p class="text-[var(--text-dim)] mb-4 leading-relaxed">
                Runtimes read these manifests and "compile" user requests into provider-specific HTTP calls. No <code>if provider == "openai"</code> branches anywhere.
              </p>
              <ul class="space-y-3">
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">Endpoint & Auth</strong> — Base URL, protocol, bearer tokens, API key headers</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">Parameter Mapping</strong> — Standard names to provider-specific JSON fields</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">Streaming Decoder</strong> — SSE/NDJSON format, JSONPath event extraction rules</span>
                </li>
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-purple-400 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
                  <span class="text-sm text-[var(--text-dim)]"><strong class="text-[var(--text)]">Error Classification</strong> — HTTP status codes to 13 standard error types</span>
                </li>
              </ul>
            </div>
            <div>
              <pre class="text-sm !bg-[#0d1117] !border-purple-500/20"><code class="language-yaml"><span style="color:#7ee787">id</span>: anthropic
<span style="color:#7ee787">protocol_version</span>: <span style="color:#a5d6ff">"0.5.0"</span>
<span style="color:#7ee787">endpoint</span>:
  <span style="color:#7ee787">base_url</span>: <span style="color:#a5d6ff">"https://api.anthropic.com/v1"</span>
  <span style="color:#7ee787">chat_path</span>: <span style="color:#a5d6ff">"/messages"</span>
<span style="color:#7ee787">auth</span>:
  <span style="color:#7ee787">type</span>: bearer
  <span style="color:#7ee787">token_env</span>: <span style="color:#a5d6ff">"ANTHROPIC_API_KEY"</span>
<span style="color:#7ee787">parameter_mappings</span>:
  <span style="color:#7ee787">temperature</span>: <span style="color:#a5d6ff">"temperature"</span>
  <span style="color:#7ee787">max_tokens</span>: <span style="color:#a5d6ff">"max_tokens"</span>
  <span style="color:#7ee787">stream</span>: <span style="color:#a5d6ff">"stream"</span>
<span style="color:#7ee787">streaming</span>:
  <span style="color:#7ee787">decoder</span>:
    <span style="color:#7ee787">format</span>: <span style="color:#a5d6ff">"anthropic_sse"</span>
  <span style="color:#7ee787">event_map</span>:
    - <span style="color:#7ee787">match</span>: <span style="color:#a5d6ff">"$.type == 'content_block_delta'"</span>
      <span style="color:#7ee787">emit</span>: <span style="color:#a5d6ff">"PartialContentDelta"</span>
<span style="color:#7ee787">error_classification</span>:
  <span style="color:#7ee787">by_http_status</span>:
    <span style="color:#a5d6ff">"429"</span>: <span style="color:#a5d6ff">"rate_limited"</span>
    <span style="color:#a5d6ff">"401"</span>: <span style="color:#a5d6ff">"authentication"</span>
<span style="color:#7ee787">capabilities</span>:
  <span style="color:#7ee787">streaming</span>: true
  <span style="color:#7ee787">tools</span>: true
  <span style="color:#7ee787">vision</span>: true</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- Ecosystem Architecture -->
      <section class="section-alt">
        <div class="container">
          <div class="text-center mb-10">
            <h2 class="text-3xl font-bold text-[var(--text)] mb-4">Where Protocol Fits</h2>
            <p class="text-lg text-[var(--text-dim)] max-w-2xl mx-auto">
              AI-Protocol is the foundation layer. Runtimes consume it. Applications consume runtimes.
            </p>
          </div>
          <EcosystemOverview locale={locale} />
        </div>
      </section>

      <!-- Supported Providers -->
      <section class="section">
        <div class="container">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-4 text-center">Supported Providers</h2>
          <p class="text-lg text-[var(--text-dim)] max-w-2xl mx-auto text-center mb-10">
            Each provider has a complete YAML manifest with endpoint, auth, parameter mappings, streaming decoder, error handling, and capability flags.
          </p>

          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
            {['OpenAI', 'Anthropic', 'Google Gemini', 'Groq', 'Mistral', 'DeepSeek', 'Qwen', 'Cohere', 'Azure OpenAI', 'Together AI', 'Perplexity', 'NVIDIA', 'Fireworks AI', 'Replicate', 'OpenRouter', 'DeepInfra', 'AI21 Labs', 'Cerebras', 'Lepton AI', 'Zhipu GLM', 'Doubao', 'Baidu ERNIE', 'Tencent Hunyuan', 'iFlytek Spark', 'Moonshot', 'MiniMax', 'Baichuan', 'Yi / 01.AI', 'SiliconFlow', 'SenseNova'].map(name => (
              <div class="flex items-center gap-2 px-3 py-2.5 rounded-lg border border-[var(--border)] bg-[var(--bg-card)] text-sm text-[var(--text)]">
                <div class="w-2 h-2 rounded-full bg-purple-400 flex-shrink-0"></div>
                {name}
              </div>
            ))}
          </div>
        </div>
      </section>

      <!-- CTA -->
      <section class="section-alt">
        <div class="container text-center">
          <h2 class="text-3xl font-bold text-[var(--text)] mb-4">Explore the Protocol</h2>
          <p class="text-lg text-[var(--text-dim)] mb-8 max-w-xl mx-auto">
            Read the specification, browse provider manifests, or contribute a new provider.
          </p>
          <div class="flex flex-wrap gap-4 justify-center">
            <a href="/protocol/overview/" class="inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-all hover:no-underline">Documentation</a>
            <a href="/protocol/contributing/" class="inline-flex items-center gap-2 px-6 py-3 border border-[var(--border)] text-[var(--text)] font-semibold rounded-lg hover:bg-[var(--bg-alt)] transition-all hover:no-underline">Contribute a Provider</a>
          </div>
        </div>
      </section>
    </main>

    <Footer locale={locale} />
  </body>
</html>
